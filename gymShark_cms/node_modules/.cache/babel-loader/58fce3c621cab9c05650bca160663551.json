{"ast":null,"code":"import _toConsumableArray from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\src\\\\views\\\\Wedding\\\\Add.js\";\nimport React, { Fragment, useEffect, useState } from \"react\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MaterialButton from '@material-ui/core/Button';\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport { FormControl, FormControlLabel, MenuItem, Radio, RadioGroup, Select, TextField } from \"@material-ui/core\";\nimport CKEditor from 'ckeditor4-react';\nimport { Image } from \"@material-ui/icons\";\nimport API from \"utils/http\";\nimport LangAPI from \"langapi/http\";\nimport { useParams, withRouter, useLocation } from \"react-router-dom\";\nimport { ckEditorConfig } from \"utils/data\";\nimport GalleryDialog from \"views/Common/GalleryDialog\";\nvar website_url = \"https://fishermanscove-resort.com/\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1\n    },\n    paper: {\n      padding: theme.spacing(2),\n      textAlign: 'center',\n      color: theme.palette.text.secondary\n    }\n  };\n});\nexport default withRouter(function WeddingAdd(props) {\n  var classes = useStyles(); //check if edit or add request\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var _useLocation = useLocation(),\n      search = _useLocation.search;\n\n  var query = new URLSearchParams(search);\n  var lang = query.get('lang');\n  var initialObject = {\n    name: '',\n    short_description: \"\",\n    detailed_content: \"\",\n    slug: \"\",\n    img_directory: \"wedding\",\n    images_list: '',\n    thumbnailPreview: \"\",\n    thumbnail: \"\"\n  };\n\n  var _useState = useState(_objectSpread({}, initialObject)),\n      _useState2 = _slicedToArray(_useState, 2),\n      wedding = _useState2[0],\n      setWedding = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      weddingImages = _useState4[0],\n      setWeddingImages = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isEdit = _useState6[0],\n      setIsEdit = _useState6[1];\n\n  var _useState7 = useState(-1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      post_id = _useState8[0],\n      setPostId = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      imagesData = _useState10[0],\n      setImagesData = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      uploadsPreview = _useState12[0],\n      setUploadsPreview = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      selectedImages = _useState14[0],\n      setSelectedImages = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      showGallery = _useState16[0],\n      setShowGallery = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      isSingle = _useState18[0],\n      setIsSingle = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      renderPreviews = _useState20[0],\n      setRenderPreviews = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      thumbnailPreview = _useState22[0],\n      setThumbnailPreview = _useState22[1];\n\n  var _useState23 = useState(lang || \"en\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      selectedLang = _useState24[0],\n      setSelectedLang = _useState24[1];\n\n  useEffect(function () {\n    if (id && id != null) {\n      setIsEdit(true); // setPostId(id);\n      // LangAPI.get(`/weddings/${id}/edit`).then(response => {\n\n      LangAPI.get(\"/weddings/\".concat(id, \"?lang=\").concat(selectedLang)).then(function (response) {\n        var _response$data;\n\n        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.status) === '200') {\n          var _response$data2;\n\n          // console.log(response?.data,\"response?.data\")\n          // return false;\n          // let data = { ...response?.data?.wedding_details };\n          // data.route = website_url + data.route;\n          if (response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.data) {\n            var _response$data3, _response$data4;\n\n            setWedding(response === null || response === void 0 ? void 0 : (_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.data);\n            setThumbnailPreview(response === null || response === void 0 ? void 0 : (_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : _response$data4.data.thumbnailPreview);\n          } else {\n            setWedding(initialObject);\n            setThumbnailPreview(null);\n          } // setUploadsPreview(response.data?.uploads);\n\n        }\n      });\n    }\n\n    if (!imagesData.length > 0) {\n      getGalleryImages();\n    }\n  }, [selectedLang]);\n\n  var getGalleryImages = function getGalleryImages() {\n    LangAPI.get(\"/get_all_images\").then(function (response) {\n      if (response.status === 200) {\n        var _response$data5, _response$data5$data;\n\n        setImagesData((_response$data5 = response.data) === null || _response$data5 === void 0 ? void 0 : (_response$data5$data = _response$data5.data) === null || _response$data5$data === void 0 ? void 0 : _response$data5$data.map(function (x) {\n          return _objectSpread(_objectSpread({}, x), {}, {\n            isChecked: false\n          });\n        }));\n      }\n    });\n  };\n\n  var handleInputChange = function handleInputChange(e) {\n    var updatedWedding = _objectSpread({}, wedding);\n\n    updatedWedding[e.target.name] = e.target.value;\n    setWedding(updatedWedding);\n  };\n\n  var handleImageSelect = function handleImageSelect(e, index) {\n    if (e.target.checked) {\n      if (isSingle) {\n        setWedding(_objectSpread(_objectSpread({}, wedding), {}, {\n          thumbnail: imagesData[index].avatar\n        }));\n        setThumbnailPreview(imagesData[index].avatar);\n        setSelectedImages(imagesData[index]);\n        setTimeout(function () {\n          setShowGallery(false);\n        }, 500);\n      } else {\n        setSelectedImages([].concat(_toConsumableArray(selectedImages), [imagesData[index].id]));\n      }\n\n      var imagesDataUpdated = imagesData.map(function (x, i) {\n        if (i === index) {\n          return _objectSpread(_objectSpread({}, x), {}, {\n            isChecked: true\n          });\n        } else {\n          return x;\n        }\n      });\n      setImagesData(imagesDataUpdated);\n    } else {\n      if (isSingle) {\n        setWedding(_objectSpread(_objectSpread({}, wedding), {}, {\n          thumbnail: \"\"\n        }));\n        setThumbnailPreview(\"\");\n      } else {\n        setSelectedImages(selectedImages.filter(function (x) {\n          return x !== imagesData[index].id;\n        }));\n      }\n\n      setImagesData(imagesData.map(function (x, i) {\n        if (i === index) {\n          return _objectSpread(_objectSpread({}, x), {}, {\n            isChecked: false\n          });\n        } else {\n          return x;\n        }\n      }));\n    }\n  };\n\n  var handleSubmit = function handleSubmit() {\n    var finalWedding = wedding;\n    finalWedding.route = \"wedding\";\n    finalWedding.images_list = JSON.stringify(selectedImages);\n    finalWedding.thumbnailPreview = thumbnailPreview; // finalWedding.is_indexed_or_is_followed = `${finalWedding.is_indexed},${finalWedding.is_followed}`;\n\n    if (!finalWedding.name || finalWedding.name == \"\") {\n      alert(\"Please Enter Name before Submiting\");\n      return false;\n    }\n\n    if (!finalWedding.slug || finalWedding.slug == \"\") {\n      alert(\"Please Enter Slug before Submiting\");\n      return false;\n    }\n\n    if (!finalWedding.thumbnailPreview || finalWedding.thumbnailPreview == \"\") {\n      alert(\"Please Select Image before Submiting\");\n      return false;\n    } // if(!finalWedding.short_description || finalWedding.short_description == \"\"){\n    //   alert(\"Please Enter Short Description before Submiting\")\n    //   return false;\n    // }\n\n\n    if (isEdit) {\n      LangAPI.post(\"/weddings?lang=\".concat(selectedLang), finalWedding).then(function (response) {\n        console.log(response);\n\n        if (response.status === 200) {\n          alert(\"Record Updated\"); // setWedding({ ...initialObject }); //resetting the form\n\n          props.history.push('/admin/weddings');\n        }\n      })[\"catch\"](function (err) {\n        return alert(\"Something went wrong\");\n      });\n    } else {\n      LangAPI.post(\"/weddings?lang=\".concat(selectedLang), finalWedding).then(function (response) {\n        console.log(response);\n\n        if (response.status === 200) {\n          var _response$data6;\n\n          alert(\"Record Updated\");\n          setPostId((_response$data6 = response.data) === null || _response$data6 === void 0 ? void 0 : _response$data6.post_id); // setWedding({ ...initialObject });\n\n          props.history.push('/admin/weddings');\n        }\n      })[\"catch\"](function (err) {\n        return alert(\"Something went wrong.\");\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    // setAge(event.target.value as string);\n    if (event.target.value != selectedLang) {\n      setSelectedLang(event.target.value);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    color: \"primary\",\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, \"Add Wedding Place\"), /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    size: \"small\",\n    style: {\n      width: \"20%\",\n      color: \"white\"\n    } // fullWidth\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"language\",\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, \"Select Language\"), /*#__PURE__*/React.createElement(Select, {\n    labelId: \"language\",\n    id: \"language\",\n    name: \"language\",\n    value: selectedLang,\n    label: \"Select Language\",\n    fullWidth: true,\n    style: {\n      color: \"white\"\n    },\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: 'en',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, \"En\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 'fr',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, \"FR\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 'de',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, \"DE\")))), /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, \"General Information\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"name\",\n    name: \"name\",\n    label: \"Name\",\n    value: wedding === null || wedding === void 0 ? void 0 : wedding.name,\n    variant: \"outlined\",\n    fullWidth: true,\n    onChange: handleInputChange,\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"slug\",\n    name: \"slug\",\n    label: \"Slug\",\n    value: wedding === null || wedding === void 0 ? void 0 : wedding.slug,\n    variant: \"outlined\",\n    fullWidth: true,\n    onChange: handleInputChange,\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"thumbnail-preview-wrapper-small img-thumbnail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, !isEdit ? thumbnailPreview && thumbnailPreview !== \"\" ? /*#__PURE__*/React.createElement(\"img\", {\n    src: thumbnailPreview,\n    alt: (wedding === null || wedding === void 0 ? void 0 : wedding.alt_text) || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://cpworldgroup.com/wp-content/uploads/2021/01/placeholder.png\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 25\n    }\n  }) : typeof (wedding === null || wedding === void 0 ? void 0 : wedding.thumbnail) === typeof 0 ? /*#__PURE__*/React.createElement(\"img\", {\n    src: thumbnailPreview,\n    alt: (wedding === null || wedding === void 0 ? void 0 : wedding.alt_text) || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    src: wedding === null || wedding === void 0 ? void 0 : wedding.thumbnail,\n    alt: (wedding === null || wedding === void 0 ? void 0 : wedding.alt_text) || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MaterialButton, {\n    variant: \"contained\",\n    color: \"primary\",\n    startIcon: /*#__PURE__*/React.createElement(Image, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 32\n      }\n    }),\n    className: \"mt-1\",\n    fullWidth: true,\n    onClick: function onClick() {\n      setIsSingle(true);\n      setShowGallery(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }, isEdit ? 'Change' : 'Upload', \" Featured Image\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 17\n    }\n  }, \"Detailed Content\"), /*#__PURE__*/React.createElement(CKEditor, {\n    config: ckEditorConfig,\n    onBeforeLoad: function onBeforeLoad(CKEDITOR) {\n      return CKEDITOR.disableAutoInline = true;\n    },\n    data: wedding === null || wedding === void 0 ? void 0 : wedding.detailed_content,\n    type: \"classic\",\n    onChange: function onChange(e) {\n      return setWedding(_objectSpread(_objectSpread({}, wedding), {}, {\n        detailed_content: e.editor.getData()\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MaterialButton, {\n    onClick: handleSubmit,\n    style: {\n      \"float\": 'right'\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  }, \"Submit\"))), /*#__PURE__*/React.createElement(GalleryDialog, {\n    isSingle: isSingle,\n    open: showGallery,\n    handleImageSelect: handleImageSelect,\n    handleClose: function handleClose() {\n      setShowGallery(false);\n      setRenderPreviews(true);\n    },\n    refreshGallery: getGalleryImages,\n    data: imagesData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }\n  })))));\n});","map":{"version":3,"sources":["E:/laragon/www/Prism/gymShark/gymShark_cms/src/views/Wedding/Add.js"],"names":["React","Fragment","useEffect","useState","makeStyles","Grid","InputLabel","MaterialButton","Button","Card","CardHeader","CardBody","FormControl","FormControlLabel","MenuItem","Radio","RadioGroup","Select","TextField","CKEditor","Image","API","LangAPI","useParams","withRouter","useLocation","ckEditorConfig","GalleryDialog","website_url","useStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","WeddingAdd","props","classes","id","search","query","URLSearchParams","lang","get","initialObject","name","short_description","detailed_content","slug","img_directory","images_list","thumbnailPreview","thumbnail","wedding","setWedding","weddingImages","setWeddingImages","isEdit","setIsEdit","post_id","setPostId","imagesData","setImagesData","uploadsPreview","setUploadsPreview","selectedImages","setSelectedImages","showGallery","setShowGallery","isSingle","setIsSingle","renderPreviews","setRenderPreviews","setThumbnailPreview","selectedLang","setSelectedLang","then","response","data","status","length","getGalleryImages","map","x","isChecked","handleInputChange","e","updatedWedding","target","value","handleImageSelect","index","checked","avatar","setTimeout","imagesDataUpdated","i","filter","handleSubmit","finalWedding","route","JSON","stringify","alert","post","console","log","history","push","err","handleChange","event","width","display","alt_text","CKEDITOR","disableAutoInline","editor","getData"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\n// @material-ui/core components\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MaterialButton from '@material-ui/core/Button';\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport { FormControl, FormControlLabel, MenuItem, Radio, RadioGroup, Select, TextField, } from \"@material-ui/core\";\nimport CKEditor from 'ckeditor4-react';\n\nimport { Image } from \"@material-ui/icons\";\nimport API from \"utils/http\";\nimport LangAPI from \"langapi/http\";\nimport { useParams, withRouter, useLocation } from \"react-router-dom\";\nimport { ckEditorConfig } from \"utils/data\";\nimport GalleryDialog from \"views/Common/GalleryDialog\";\n\nconst website_url = \"https://fishermanscove-resort.com/\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n}));\n\n\nexport default withRouter(function WeddingAdd(props) {\n  const classes = useStyles();\n  //check if edit or add request\n  let { id } = useParams();\n  let { search } = useLocation();\n  const query = new URLSearchParams(search);\n  const lang = query.get('lang');\n\n  const initialObject = {\n    name: '',\n    short_description: \"\",\n    detailed_content: \"\",\n    slug: \"\",\n    img_directory: \"wedding\",\n    images_list: '',\n    thumbnailPreview: \"\",\n    thumbnail: \"\"\n\n  }\n  const [wedding, setWedding] = useState({ ...initialObject });\n  const [weddingImages, setWeddingImages] = useState([]);\n  const [isEdit, setIsEdit] = useState(false);\n  const [post_id, setPostId] = useState(-1);\n\n  const [imagesData, setImagesData] = useState([])\n  const [uploadsPreview, setUploadsPreview] = useState(null)\n  const [selectedImages, setSelectedImages] = useState([])\n  const [showGallery, setShowGallery] = useState(false)\n  const [isSingle, setIsSingle] = useState(false)\n  const [renderPreviews, setRenderPreviews] = useState(false)\n  const [thumbnailPreview, setThumbnailPreview] = useState('')\n  const [selectedLang, setSelectedLang] = useState(lang || \"en\");\n\n\n  useEffect(() => {\n    if (id && id != null) {\n      setIsEdit(true);\n      // setPostId(id);\n      // LangAPI.get(`/weddings/${id}/edit`).then(response => {\n      LangAPI.get(`/weddings/${id}?lang=${selectedLang}`).then(response => {\n        if (response?.data?.status === '200') {\n          // console.log(response?.data,\"response?.data\")\n          // return false;\n          // let data = { ...response?.data?.wedding_details };\n          // data.route = website_url + data.route;\n          if (response?.data?.data) {\n            setWedding(response?.data?.data);\n            setThumbnailPreview(response?.data?.data.thumbnailPreview)\n          } else {\n            setWedding(initialObject);\n            setThumbnailPreview(null)\n          }\n          // setUploadsPreview(response.data?.uploads);\n        }\n      })\n    }\n\n    if (!imagesData.length > 0) {\n      getGalleryImages();\n    }\n  }, [selectedLang])\n\n  const getGalleryImages = () => {\n    LangAPI.get(`/get_all_images`).then((response) => {\n      if (response.status === 200) {\n        setImagesData(response.data?.data?.map((x) => ({ ...x, isChecked: false })));\n      }\n    });\n  };\n\n  const handleInputChange = (e) => {\n    let updatedWedding = { ...wedding };\n    updatedWedding[e.target.name] = e.target.value;\n    setWedding(updatedWedding);\n  }\n\n\n  const handleImageSelect = (e, index) => {\n    if (e.target.checked) {\n      if (isSingle) {\n        setWedding({ ...wedding, thumbnail: imagesData[index].avatar })\n        setThumbnailPreview(imagesData[index].avatar)\n        setSelectedImages(imagesData[index]);\n        setTimeout(() => {\n          setShowGallery(false);\n        }, 500);\n      } else {\n        setSelectedImages([...selectedImages, imagesData[index].id]);\n      }\n      let imagesDataUpdated = imagesData.map((x, i) => {\n        if (i === index) {\n          return {\n            ...x,\n            isChecked: true\n          }\n        } else {\n          return x\n        }\n      });\n      setImagesData(imagesDataUpdated);\n    } else {\n      if (isSingle) {\n        setWedding({ ...wedding, thumbnail: \"\" })\n        setThumbnailPreview(\"\")\n      } else {\n        setSelectedImages(selectedImages.filter(x => x !== imagesData[index].id));\n      }\n      setImagesData(imagesData.map((x, i) => {\n        if (i === index) {\n          return {\n            ...x,\n            isChecked: false\n          }\n        } else {\n          return x\n        }\n      }));\n    }\n  }\n\n  const handleSubmit = () => {\n    let finalWedding = wedding;\n    finalWedding.route = \"wedding\";\n    finalWedding.images_list = JSON.stringify(selectedImages);\n    finalWedding.thumbnailPreview = thumbnailPreview;\n    // finalWedding.is_indexed_or_is_followed = `${finalWedding.is_indexed},${finalWedding.is_followed}`;\n    if (!finalWedding.name || finalWedding.name == \"\") {\n      alert(\"Please Enter Name before Submiting\")\n      return false;\n    }\n    if (!finalWedding.slug || finalWedding.slug == \"\") {\n      alert(\"Please Enter Slug before Submiting\")\n      return false;\n    }\n    if (!finalWedding.thumbnailPreview || finalWedding.thumbnailPreview == \"\") {\n      alert(\"Please Select Image before Submiting\")\n      return false;\n    }\n    // if(!finalWedding.short_description || finalWedding.short_description == \"\"){\n    //   alert(\"Please Enter Short Description before Submiting\")\n    //   return false;\n    // }\n\n    if (isEdit) {\n      LangAPI.post(`/weddings?lang=${selectedLang}`, finalWedding).then(response => {\n        console.log(response);\n        if (response.status === 200) {\n          alert(\"Record Updated\");\n          // setWedding({ ...initialObject }); //resetting the form\n          props.history.push('/admin/weddings');\n        }\n      }).catch(err => alert(\"Something went wrong\"));\n    } else {\n      LangAPI.post(`/weddings?lang=${selectedLang}`, finalWedding).then(response => {\n        console.log(response);\n        if (response.status === 200) {\n          alert(\"Record Updated\");\n          setPostId(response.data?.post_id);\n          // setWedding({ ...initialObject });\n          props.history.push('/admin/weddings');\n        }\n      }).catch(err => alert(\"Something went wrong.\"))\n    }\n  }\n\n  const handleChange = (event) => {\n    // setAge(event.target.value as string);\n    if (event.target.value != selectedLang) {\n      setSelectedLang(event.target.value)\n    }\n  };\n\n\n  return (\n    <div>\n      <div className={classes.root}>\n        <Card>\n          <CardHeader color=\"primary\" className=\"d-flex justify-content-between align-items-center\">\n            <h4 className=\"mb-0\">Add Wedding Place</h4>\n            <FormControl\n              variant=\"outlined\"\n              size=\"small\"\n              style={{ width: \"20%\", color: \"white\" }}\n            // fullWidth\n            >\n              <InputLabel id=\"language\"\n                style={{ color: \"white\" }}\n              >Select Language</InputLabel>\n              <Select\n                labelId=\"language\"\n                id=\"language\"\n                name=\"language\"\n                value={selectedLang}\n                label=\"Select Language\"\n                fullWidth\n                style={{ color: \"white\" }}\n                onChange={handleChange}\n              >\n                <MenuItem value={'en'}>En</MenuItem>\n                <MenuItem value={'fr'}>FR</MenuItem>\n                <MenuItem value={'de'}>DE</MenuItem>\n\n              </Select>\n            </FormControl>\n          </CardHeader>\n          <CardBody>\n            <h4 className=\"mt-1\">General Information</h4>\n            <Grid container spacing={2} style={{ display: 'flex' }}>\n              <Grid item xs={12} sm={7} >\n                <Grid container spacing={5}>\n                  <Grid item xs={12} sm={12}>\n                    <TextField\n                      required\n                      id=\"name\"\n                      name=\"name\"\n                      label=\"Name\"\n                      value={wedding?.name}\n                      variant=\"outlined\"\n                      fullWidth\n                      onChange={handleInputChange}\n                      size=\"small\"\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={12}>\n                    <TextField\n                      required\n                      id=\"slug\"\n                      name=\"slug\"\n                      label=\"Slug\"\n                      value={wedding?.slug}\n                      variant=\"outlined\"\n                      fullWidth\n                      onChange={handleInputChange}\n                      size=\"small\"\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={12} sm={5}>\n                <div className=\"thumbnail-preview-wrapper-small img-thumbnail\">\n                  {\n                    !isEdit ?\n                      thumbnailPreview && thumbnailPreview !== \"\" ?\n                        <img src={thumbnailPreview} alt={wedding?.alt_text || \"\"} />\n                        :\n                        <img src=\"https://cpworldgroup.com/wp-content/uploads/2021/01/placeholder.png\" alt=\"\" />\n                      :\n                      typeof (wedding?.thumbnail) === typeof (0) ?\n                        <img src={thumbnailPreview} alt={wedding?.alt_text || \"\"} />\n                        :\n                        <img src={wedding?.thumbnail} alt={wedding?.alt_text || \"\"} />\n                  }\n                </div>\n                <Fragment>\n                  <MaterialButton\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<Image />}\n                    className=\"mt-1\"\n                    fullWidth\n                    onClick={() => {\n                      setIsSingle(true);\n                      setShowGallery(true);\n                    }}\n                  >\n                    {isEdit ? 'Change' : 'Upload'} Featured Image\n                  </MaterialButton>\n                </Fragment>\n              </Grid>\n              {/* <Grid item xs={12} sm={12}>\n                <hr />\n\n                <h4>Short Description</h4>\n                <CKEditor config={ckEditorConfig} onBeforeLoad={(CKEDITOR) => (CKEDITOR.disableAutoInline = true)} data={wedding?.short_description} onChange={(e) => setWedding({ ...wedding, short_description: e.editor.getData() })}\n                />\n              </Grid> */}\n\n              <Grid item xs={12} sm={12}>\n                {/* <hr /> */}\n                <h4>Detailed Content</h4>\n\n                <CKEditor config={ckEditorConfig} onBeforeLoad={(CKEDITOR) => (CKEDITOR.disableAutoInline = true)} data={wedding?.detailed_content} type=\"classic\" onChange={(e) => setWedding({ ...wedding, detailed_content: e.editor.getData() })} />\n\n              </Grid>\n              <Grid item xs={12} sm={12}>\n                <MaterialButton onClick={handleSubmit} style={{ float: 'right' }} variant=\"contained\" color=\"primary\" size=\"large\">\n                  Submit\n                </MaterialButton>\n              </Grid>\n            </Grid>\n            <GalleryDialog isSingle={isSingle} open={showGallery} handleImageSelect={handleImageSelect} handleClose={() => {\n              setShowGallery(false);\n              setRenderPreviews(true);\n            }} refreshGallery={getGalleryImages} data={imagesData} />\n          </CardBody>\n        </Card>\n\n        {/* MULTIPLE IMAGES UPLOAD SECTION START */}\n        {/* <Card>\n          <CardBody>\n            <form type=\"post\" encType=\"multipart/form-data\">\n\n              <h3>Wedding Images</h3>\n              <Grid container spacing={2}>\n                <Grid item xs={12} sm={12}>\n                  {weddingImages.length < 1 &&\n\n                    <Fragment>\n                      <input\n                        color=\"primary\"\n                        accept=\"image/*\"\n                        type=\"file\"\n                        multiple\n                        onChange={handleMultipleFileChange}\n                        id=\"thumbnailMultiple\"\n                        name=\"thumbnailMultiple\"\n                        disabled={post_id > 0 ? false : true}\n                        style={{ display: 'none', }}\n                      />\n                      <label htmlFor=\"thumbnailMultiple\">\n                        <Button\n                          variant=\"contained\"\n                          component=\"span\"\n                          className={classes.button}\n                          size=\"large\"\n                          color=\"primary\"\n                          disabled={post_id > 0 ? false : true}\n                          style={{ margin: 0, height: '100%', }}\n                        >\n                          <Image className={classes.extendedIcon} /> Select Multiple Images\n                    </Button>\n                      </label>\n                    </Fragment>\n                  }\n                </Grid>\n                {\n                  weddingImages?.map((x, i) => (\n                    <>\n                      <Grid item xs={12} sm={2}>\n                        <Avatar src={URL.createObjectURL(x.avatar)} alt={x.alt_tag} />\n                      </Grid>\n                      <Grid item xs={12} sm={4}>\n                        <TextField\n                          required\n                          id={`alt_tag${i}`}\n                          name=\"alt_tag\"\n                          label=\"Image Alt Text\"\n                          value={x.alt_tag}\n                          variant=\"outlined\"\n                          fullWidth\n                          onChange={(e) => handleImageAltChange(e, i)}\n                          size=\"small\"\n                        />\n                      </Grid>\n                      <Grid item xs={12} sm={4}>\n                        <FormControl component=\"fieldset\">\n                          <RadioGroup aria-label=\"is360\" row defaultChecked name=\"is360\" value={x.is360} onChange={(e) => {\n                            setWeddingImages(weddingImages.map((y, ind) => {\n                              if (ind === i) {\n                                return { ...y, is360: !y.is360 }\n                              } else {\n                                return y\n                              }\n                            }))\n                          }}>\n                            <FormControlLabel value={false} control={<Radio />} label=\"Regular/Slider\" />\n                            <FormControlLabel value={true} control={<Radio />} label={<span>360<sup>o</sup> View</span>} />\n                          </RadioGroup>\n                        </FormControl>\n                      </Grid>\n                      <Grid item xs={12} sm={2}>\n                        <MaterialButton variant=\"outlined\" color=\"secondary\" onClick={() => setWeddingImages([...weddingImages.filter((z, index) => index !== i)])}>\n                          <DeleteOutlined />\n                        </MaterialButton>\n                      </Grid>\n                    </>\n                  ))\n                }\n                {\n                  weddingImages.length > 0 &&\n                  <Grid item xs={12} sm={12}>\n                    <MaterialButton variant=\"contained\" size=\"large\" color=\"primary\" style={{ float: 'right' }} onClick={handleMultipleSubmit}>\n                      Upload/Update Images\n                  </MaterialButton>\n                  </Grid>\n                }\n              </Grid>\n            </form>\n          </CardBody>\n        </Card> */}\n        {/* MULTIPLE IMAGES UPLOAD SECTION END */}\n      </div>\n    </div>\n  );\n}\n)\n"]},"metadata":{},"sourceType":"module"}