{"ast":null,"code":"import _objectSpread from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymshark_cms\\\\src\\\\views\\\\Variations\\\\Add.js\";\nimport React, { Fragment, useEffect, useState } from \"react\"; //Suspense\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Grid from \"@material-ui/core/Grid\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport { FormControl, MenuItem, Select, TextField } from \"@material-ui/core\";\nimport LangAPI from \"langapi/http\";\nimport { useParams, withRouter, useLocation } from \"react-router-dom\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1\n    },\n    paper: {\n      padding: theme.spacing(2),\n      textAlign: \"center\",\n      color: theme.palette.text.secondary\n    }\n  };\n});\nexport default withRouter(function AddVariation(props) {\n  var _useLocation = useLocation(),\n      search = _useLocation.search;\n\n  var query = new URLSearchParams(search);\n  var lang = query.get('lang');\n  var classes = useStyles();\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var initialObject = {\n    name: \"\",\n    route: \"\"\n  };\n\n  var _useState = useState(_objectSpread({}, initialObject)),\n      _useState2 = _slicedToArray(_useState, 2),\n      room = _useState2[0],\n      setRoom = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      imagesData = _useState4[0],\n      setImagesData = _useState4[1];\n\n  var _useState5 = useState(lang || \"en\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedLang = _useState6[0],\n      setSelectedLang = _useState6[1];\n\n  useEffect(function () {\n    if (id && id != null) {\n      LangAPI.get(\"/variations/\".concat(id, \"?lang=\").concat(selectedLang)).then(function (response) {\n        if (response.status === 200) {\n          var _response$data, _response$data2;\n\n          var data = _objectSpread({}, response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data);\n\n          if (response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.data) {\n            setRoom(_objectSpread(_objectSpread({}, room), data));\n          } else {\n            setRoom(_objectSpread({}, initialObject));\n          }\n        }\n      });\n    }\n\n    if (!imagesData.length > 0) {\n      getGalleryImages();\n    }\n  }, [selectedLang]);\n\n  var getGalleryImages = function getGalleryImages() {\n    LangAPI.get(\"/uploads\").then(function (response) {\n      if (response.status === 200) {\n        var _response$data3, _response$data3$data;\n\n        setImagesData((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : (_response$data3$data = _response$data3.data) === null || _response$data3$data === void 0 ? void 0 : _response$data3$data.map(function (x) {\n          return _objectSpread(_objectSpread({}, x), {}, {\n            isChecked: false\n          });\n        }));\n      }\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  };\n\n  var handleInputChange = function handleInputChange(e) {\n    var updatedRoom = _objectSpread({}, room);\n\n    updatedRoom[e.target.name] = e.target.value;\n    setRoom(updatedRoom);\n  };\n\n  var handleSlugChange = function handleSlugChange(e) {\n    var updatedRoom = _objectSpread({}, room);\n\n    var updatedValue = e.target.value.replace(/\\s+/g, \"-\");\n    updatedValue = updatedValue.replace(/--/g, \"-\");\n    updatedRoom[e.target.name] = updatedValue.toLowerCase();\n    setRoom(updatedRoom);\n  };\n\n  var handleSubmit = function handleSubmit() {\n    var finalRoom = room;\n\n    if (!finalRoom.name || finalRoom.name == \"\") {\n      alert(\"Please Enter Name before Submiting\");\n      return false;\n    }\n\n    if (!finalRoom.route || finalRoom.route == \"\") {\n      alert(\"Please Enter Route before Submiting\");\n      return false;\n    }\n\n    if (finalRoom.variant_values) {\n      delete finalRoom.variant_values;\n    }\n\n    if (finalRoom.created_at) {\n      delete finalRoom.created_at;\n    }\n\n    if (finalRoom.updated_at) {\n      delete finalRoom.updated_at;\n    }\n\n    var token = localStorage.getItem(\"authToken\") || \"\";\n    LangAPI.post(\"/variations?lang=\".concat(selectedLang), finalRoom, {\n      headers: {\n        'Authorization': \"Bearer \".concat(token)\n      }\n    }).then(function (response) {\n      if (response.status === 200) {\n        alert(\"Variation Added\");\n        setRoom(_objectSpread({}, initialObject));\n        props.history.push(\"/admin/variations\");\n      }\n    });\n  };\n\n  var handleChange = function handleChange(event) {\n    // setAge(event.target.value as string);\n    if (event.target.value != selectedLang) {\n      setSelectedLang(event.target.value);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    color: \"primary\",\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    style: {\n      fontWeight: \"400\"\n    },\n    className: \"mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, \"Add Variation\")), /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    style: {\n      fontWeight: \"400\"\n    },\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, \"General Information\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    style: {\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"name\",\n    name: \"name\",\n    label: \"Name\",\n    value: room.name,\n    variant: \"outlined\",\n    fullWidth: true,\n    onChange: handleInputChange,\n    size: \"small\",\n    helperText: '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"route\",\n    name: \"route\",\n    label: \"Route *\",\n    value: room.route,\n    variant: \"outlined\",\n    fullWidth: true,\n    onChange: handleSlugChange,\n    size: \"small\",\n    helperText: '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"clearfix clear-fix\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MaterialButton, {\n    onClick: handleSubmit,\n    style: {\n      \"float\": \"right\"\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, \"Submit\"))));\n});","map":{"version":3,"sources":["E:/laragon/www/Prism/gymShark/gymshark_cms/src/views/Variations/Add.js"],"names":["React","Fragment","useEffect","useState","makeStyles","InputLabel","Grid","MaterialButton","Card","CardHeader","CardBody","FormControl","MenuItem","Select","TextField","LangAPI","useParams","withRouter","useLocation","useStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","AddVariation","props","search","query","URLSearchParams","lang","get","classes","id","initialObject","name","route","room","setRoom","imagesData","setImagesData","selectedLang","setSelectedLang","then","response","status","data","length","getGalleryImages","map","x","isChecked","err","console","log","handleInputChange","e","updatedRoom","target","value","handleSlugChange","updatedValue","replace","toLowerCase","handleSubmit","finalRoom","alert","variant_values","created_at","updated_at","token","localStorage","getItem","post","headers","history","push","handleChange","event","fontWeight","display"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\"; //Suspense\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Grid from \"@material-ui/core/Grid\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport { FormControl, MenuItem, Select, TextField, } from \"@material-ui/core\";\nimport LangAPI from \"langapi/http\";\nimport { useParams, withRouter, useLocation } from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    paper: {\n        padding: theme.spacing(2),\n        textAlign: \"center\",\n        color: theme.palette.text.secondary,\n    },\n}));\n\nexport default withRouter(function AddVariation(props) {\n    let { search } = useLocation();\n    const query = new URLSearchParams(search);\n    const lang = query.get('lang');\n    const classes = useStyles();\n    let { id } = useParams();\n\n    const initialObject = {\n        name: \"\",\n        route: \"\"\n    };\n    const [room, setRoom] = useState({ ...initialObject });\n    const [imagesData, setImagesData] = useState([]);\n    const [selectedLang, setSelectedLang] = useState(lang || \"en\");\n\n    useEffect(() => {\n        if (id && id != null) {\n            LangAPI.get(`/variations/${id}?lang=${selectedLang}`).then((response) => {\n                if (response.status === 200) {\n                    let data = { ...response?.data?.data};\n                    if (response?.data?.data) {\n                        setRoom({ ...room, ...data });\n                    } else {\n                        setRoom({ ...initialObject });\n                    }\n                }\n            });\n        }\n        if (!imagesData.length > 0) {\n            getGalleryImages();\n        }\n    }, [selectedLang]);\n\n    const getGalleryImages = () => {\n        LangAPI.get(`/uploads`).then((response) => {\n            if (response.status === 200) {\n                setImagesData(response.data?.data?.map((x) => ({ ...x, isChecked: false })));\n            }\n        }).catch(err => console.log(err));\n    };\n\n    const handleInputChange = (e) => {\n        let updatedRoom = { ...room };\n        updatedRoom[e.target.name] = e.target.value;\n        setRoom(updatedRoom);\n    };\n\n    const handleSlugChange = (e) => {\n        let updatedRoom = { ...room };\n        let updatedValue = e.target.value.replace(/\\s+/g, \"-\");\n        updatedValue = updatedValue.replace(/--/g, \"-\");\n        updatedRoom[e.target.name] = updatedValue.toLowerCase();\n        setRoom(updatedRoom);\n    };\n\n    const handleSubmit = () => {\n        let finalRoom = room;\n        if (!finalRoom.name || finalRoom.name == \"\") {\n            alert(\"Please Enter Name before Submiting\")\n            return false;\n        }\n        if (!finalRoom.route || finalRoom.route == \"\") {\n            alert(\"Please Enter Route before Submiting\")\n            return false;\n        }\n\n        if(finalRoom.variant_values){\n            delete finalRoom.variant_values\n        }\n        if(finalRoom.created_at){\n            delete finalRoom.created_at;\n        }\n        if(finalRoom.updated_at){\n            delete finalRoom.updated_at;\n        }\n        \n        let token =  localStorage.getItem(\"authToken\") || \"\"\n        LangAPI.post(`/variations?lang=${selectedLang}`, finalRoom, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }}).then((response) => {\n            if (response.status === 200) {\n                alert(\"Variation Added\");\n                setRoom({ ...initialObject });\n                props.history.push(\"/admin/variations\");\n            }\n        });\n    };\n\n    const handleChange = (event) => {\n        // setAge(event.target.value as string);\n        if (event.target.value != selectedLang) {\n            setSelectedLang(event.target.value)\n        }\n    };\n    return (\n        <div className={classes.root}>\n            <Card>\n                <CardHeader color=\"primary\" className=\"d-flex justify-content-between align-items-center\">\n                    {/* <div className=\"d-flex justify-content-between align-items-center\"> */}\n                    <h4 style={{ fontWeight: \"400\" }} className=\"mb-0\">\n                        Add Variation\n                    </h4>\n                    {/* <FormControl\n                        variant=\"outlined\"\n                        size=\"small\"\n                        style={{ width: \"20%\", color: \"white\" }}\n                    >\n                        <InputLabel id=\"language\"\n                            style={{ color: \"white\" }}\n                        >Select Language</InputLabel>\n                        <Select\n                            labelId=\"language\"\n                            id=\"language\"\n                            name=\"language\"\n                            value={selectedLang}\n                            label=\"Select Language\"\n                            fullWidth\n                            style={{ color: \"white\" }}\n                            onChange={handleChange}\n                        >\n                            <MenuItem value={'en'}>En</MenuItem>\n                            <MenuItem value={'fr'}>FR</MenuItem>\n                            <MenuItem value={'de'}>DE</MenuItem>\n\n                        </Select>\n                    </FormControl> */}\n                    {/* </div> */}\n\n                </CardHeader>\n                <CardBody>\n                    <h4 style={{ fontWeight: \"400\" }} className=\"mt-3\">\n                        General Information\n                    </h4>\n                    <Grid container spacing={2} style={{ display: \"flex\" }}>\n                        <Grid item xs={12} sm={12}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={12} sm={6}>\n                                    <TextField\n                                        required\n                                        id=\"name\"\n                                        name=\"name\"\n                                        label=\"Name\"\n                                        value={room.name}\n                                        variant=\"outlined\"\n                                        fullWidth\n                                        onChange={handleInputChange}\n                                        size=\"small\"\n                                        helperText={''}\n                                    />\n                                </Grid>\n                            </Grid>\n                        </Grid>\n                        <Grid item xs={12} sm={12}>\n                            <Grid container spacing={2}>\n                                <Grid item xs={12} sm={6}>\n                                    <TextField\n                                        id=\"route\"\n                                        name=\"route\"\n                                        label=\"Route *\"\n                                        value={room.route}\n                                        variant=\"outlined\"\n                                        fullWidth\n                                        onChange={handleSlugChange}\n                                        size=\"small\"\n                                        helperText={''}\n                                    />\n                                </Grid>\n                            </Grid>\n                        </Grid>\n                        {/* <Grid item xs={12} sm={12}>\n                            <hr />\n                            <h4 style={{ fontWeight: \"400\" }}>Short Description</h4>\n                            <CKEditor\n                                onBeforeLoad={(CKEDITOR) => (CKEDITOR.disableAutoInline = true)}\n                                data={room.short_description}\n                                onChange={(e) =>\n                                    setRoom({ ...room, short_description: e.editor.getData() })\n                                }\n                            />\n                        </Grid> */}\n                        <div className=\"clearfix clear-fix\"></div>\n                    <hr />\n                    </Grid>\n                </CardBody>\n            </Card>\n\n            <Grid container spacing={2}>\n                <Grid item xs={12} sm={12}>\n                    <MaterialButton\n                        onClick={handleSubmit}\n                        style={{ float: \"right\" }}\n                        variant=\"contained\"\n                        color=\"primary\"\n                        size=\"large\"\n                    >\n                        Submit\n                    </MaterialButton>\n                </Grid>\n            </Grid>\n        </div>\n    );\n});\n"]},"metadata":{},"sourceType":"module"}