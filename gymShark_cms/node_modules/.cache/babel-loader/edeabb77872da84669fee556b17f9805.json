{"ast":null,"code":"import _objectSpread from \"E:\\\\laragon\\\\www\\\\Prism\\\\bafco_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport axios from \"axios\";\nimport { store } from \"store\";\nvar apiURL = \"https://fishermanscove-resort.com/test/public/api\";\nvar API = axios.create({\n  baseURL: apiURL,\n  timeout: 60000\n});\nAPI.interceptors.request.use(function (request) {\n  if (request) {\n    store.dispatch({\n      type: \"SHOW_SPINNER\"\n    }); //perform the manipulation here and change the request object\n    // alert(\"request called\")\n  }\n\n  return _objectSpread(_objectSpread({}, request), {}, {\n    onUploadProgress: function onUploadProgress(progressEvent) {\n      console.log(Math.round(progressEvent.loaded * 100 / progressEvent.total));\n    }\n  });\n}, function (error) {\n  console.log(\"interceptor request ERROR\", error);\n  store.dispatch({\n    type: \"HIDE_SPINNER\"\n  });\n  return Promise.reject(error.message);\n});\nAPI.interceptors.response.use(function (response) {\n  store.dispatch({\n    type: \"HIDE_SPINNER\"\n  });\n\n  if (response) {//perform the manipulation here and change the response object\n  }\n\n  return response;\n}, function (error) {\n  var _error$response;\n\n  console.log(\"interceptor response ERROR\", error);\n  store.dispatch({\n    type: \"HIDE_SPINNER\"\n  });\n\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {// history.replace(\"/authentication/logout\");\n  }\n\n  return Promise.reject(error.message);\n});\nexport default API;","map":{"version":3,"sources":["E:/laragon/www/Prism/bafco_cms/src/utils/http.js"],"names":["axios","store","apiURL","API","create","baseURL","timeout","interceptors","request","use","dispatch","type","onUploadProgress","progressEvent","console","log","Math","round","loaded","total","error","Promise","reject","message","response","status"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,OAAtB;AAEA,IAAMC,MAAM,GAAG,mDAAf;AACA,IAAMC,GAAG,GAAGH,KAAK,CAACI,MAAN,CAAa;AACvBC,EAAAA,OAAO,EAAEH,MADc;AAEvBI,EAAAA,OAAO,EAAE;AAFc,CAAb,CAAZ;AAKAH,GAAG,CAACI,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA6B,UAACD,OAAD,EAAa;AACxC,MAAIA,OAAJ,EAAa;AACXP,IAAAA,KAAK,CAACS,QAAN,CAAe;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAf,EADW,CAEX;AACA;AACD;;AACD,yCACKH,OADL;AAEEI,IAAAA,gBAAgB,EAAE,0BAAUC,aAAV,EAAyB;AACzCC,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,KAAL,CAAYJ,aAAa,CAACK,MAAd,GAAuB,GAAxB,GAA+BL,aAAa,CAACM,KAAxD,CAAZ;AACD;AAJH;AAMD,CAZD,EAYG,UAACC,KAAD,EAAW;AACZN,EAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCK,KAAzC;AACAnB,EAAAA,KAAK,CAACS,QAAN,CAAe;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAf;AAEA,SAAOU,OAAO,CAACC,MAAR,CAAeF,KAAK,CAACG,OAArB,CAAP;AACD,CAjBD;AAoBApB,GAAG,CAACI,YAAJ,CAAiBiB,QAAjB,CAA0Bf,GAA1B,CAA8B,UAACe,QAAD,EAAc;AAC1CvB,EAAAA,KAAK,CAACS,QAAN,CAAe;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAf;;AAEA,MAAIa,QAAJ,EAAc,CACZ;AACD;;AACD,SAAOA,QAAP;AACD,CAPD,EAOG,UAACJ,KAAD,EAAW;AAAA;;AACZN,EAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CK,KAA1C;AACAnB,EAAAA,KAAK,CAACS,QAAN,CAAe;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAf;;AAEA,MAAI,oBAAAS,KAAK,CAACI,QAAN,oEAAgBC,MAAhB,MAA2B,GAA/B,EAAoC,CAClC;AACD;;AACD,SAAOJ,OAAO,CAACC,MAAR,CAAeF,KAAK,CAACG,OAArB,CAAP;AACD,CAfD;AAiBA,eAAepB,GAAf","sourcesContent":["import axios from \"axios\";\nimport { store } from \"store\";\n\nconst apiURL = \"https://fishermanscove-resort.com/test/public/api\";\nconst API = axios.create({\n  baseURL: apiURL,\n  timeout: 60000,\n});\n\nAPI.interceptors.request.use((request) => {\n  if (request) {\n    store.dispatch({ type: \"SHOW_SPINNER\" });\n    //perform the manipulation here and change the request object\n    // alert(\"request called\")\n  }\n  return {\n    ...request,\n    onUploadProgress: function (progressEvent) {\n      console.log(Math.round((progressEvent.loaded * 100) / progressEvent.total))\n    }\n  };\n}, (error) => {\n  console.log(\"interceptor request ERROR\", error)\n  store.dispatch({ type: \"HIDE_SPINNER\" })\n\n  return Promise.reject(error.message);\n});\n\n\nAPI.interceptors.response.use((response) => {\n  store.dispatch({ type: \"HIDE_SPINNER\" })\n\n  if (response) {\n    //perform the manipulation here and change the response object\n  }\n  return response;\n}, (error) => {\n  console.log(\"interceptor response ERROR\", error)\n  store.dispatch({ type: \"HIDE_SPINNER\" })\n\n  if (error.response?.status === 401) {\n    // history.replace(\"/authentication/logout\");\n  }\n  return Promise.reject(error.message);\n});\n\nexport default API;\n"]},"metadata":{},"sourceType":"module"}