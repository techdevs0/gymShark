{"ast":null,"code":"import _classCallCheck from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\laragon\\\\www\\\\Prism\\\\gymShark\\\\gymShark_cms\\\\src\\\\views\\\\Premiuim-offers\\\\List.jsx\";\nimport React, { Component } from 'react';\nimport MUIDataTable from \"mui-datatables\";\nimport API from 'utils/http';\nimport LangAPI from \"langapi/http\";\nimport { Avatar, Box, Button, Select, MenuItem, FormControl } from \"@material-ui/core\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { AddOutlined, DeleteOutlined, EditOutlined, ListOutlined, VisibilityOutlined } from '@material-ui/icons';\nimport { Link } from 'react-router-dom';\nimport CategoryDialog from './CategoryDialog';\n\nvar OffersList = /*#__PURE__*/function (_Component) {\n  _inherits(OffersList, _Component);\n\n  var _super = _createSuper(OffersList);\n\n  function OffersList() {\n    var _this;\n\n    _classCallCheck(this, OffersList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      isCategoryFormOpen: false,\n      selectedLang: \"en\",\n      offers: [],\n      columns: [{\n        name: \"thumbnailPreview\",\n        label: \"Image\",\n        options: {\n          filter: false,\n          sort: false,\n          customBodyRender: function customBodyRender(val) {\n            return /*#__PURE__*/React.createElement(Avatar, {\n              alt: \"Image\",\n              src: val,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 24,\n                columnNumber: 13\n              }\n            });\n          }\n        }\n      }, {\n        name: \"post_name\",\n        label: \"Name\",\n        options: {\n          filter: true,\n          sort: true\n        }\n      }, {\n        name: \"is_premium\",\n        label: \"Room Type\",\n        options: {\n          filter: true,\n          sort: false,\n          customBodyRender: function customBodyRender(val) {\n            return val === 0 ? 'Other Offer' : 'Premium Offer';\n          }\n        }\n      }, {\n        name: \"short_description\",\n        label: \"Description\",\n        options: {\n          filter: true,\n          sort: false,\n          customBodyRender: function customBodyRender(val) {\n            return (val === null || val === void 0 ? void 0 : val.length) > 100 ? (val === null || val === void 0 ? void 0 : val.substr(0, 100)) + '...' : val;\n          }\n        }\n      }, // {\n      //   name: \"post_content\",\n      //   label: \"Content\",\n      //   options: {\n      //     filter: true,\n      //     sort: false,\n      //   }\n      // },\n      {\n        name: \"slug\",\n        label: \"Actions\",\n        options: {\n          filter: false,\n          sort: false,\n          customBodyRender: function customBodyRender(val) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              className: \"d-flex nowrap\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 13\n              }\n            }, /*#__PURE__*/React.createElement(Link, {\n              title: \"View Details\",\n              to: \"/admin/premium-offers/\".concat(val, \"?lang=\").concat(_this.state.selectedLang),\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(VisibilityOutlined, {\n              fontSize: \"small\",\n              color: \"action\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 17\n              }\n            })), /*#__PURE__*/React.createElement(Link, {\n              className: \"ml-2\",\n              title: \"Edit\",\n              to: \"/admin/premium-offers/edit/\".concat(val, \"?lang=\").concat(_this.state.selectedLang),\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(EditOutlined, {\n              fontSize: \"small\",\n              color: \"primary\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 17\n              }\n            })), /*#__PURE__*/React.createElement(Link, {\n              className: \"ml-2\",\n              title: \"Delete\",\n              to: \"#\",\n              onClick: function onClick() {\n                return _this.handleDelete(val);\n              },\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(DeleteOutlined, {\n              fontSize: \"small\",\n              color: \"secondary\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 17\n              }\n            })));\n          }\n        }\n      }],\n      rows: []\n    };\n    _this.options = {\n      filterType: \"checkbox\",\n      responsive: \"vertical\"\n    };\n\n    _this.handleCategorySubmit = function (category_name) {\n      if (!category_name || category_name === \"\") {\n        alert(\"Please enter category name\");\n        return;\n      } // API.post('/offer_categories/offers', { category_name }).then(response => {\n      //   if (response?.status === 200) {\n      //     alert(response.data?.message);\n      //     this.setState({ isCategoryFormOpen: false })\n      //   }\n      // }).catch(err => {\n      //   alert(\"Something went wrong.\");\n      // })\n\n    };\n\n    _this.handleDelete = function (id) {\n      if (window.confirm('Are you sure you want to delete this ?')) {\n        LangAPI[\"delete\"](\"/offers/\".concat(id, \"?lang=\").concat(_this.state.selectedLang)).then(function (response) {\n          if (response.status === 200) {\n            alert(\"Offer deleted successfully !\");\n          }\n        }).then(function () {\n          LangAPI.get(\"/offers?lang=\".concat(_this.state.selectedLang)).then(function (response) {\n            var _response$data, _response$data$data;\n\n            var rows = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$data = _response$data.data) === null || _response$data$data === void 0 ? void 0 : _response$data$data.filter(function (x) {\n              return (x === null || x === void 0 ? void 0 : x.is_premium) === 1;\n            });\n\n            _this.setState({\n              rows: rows\n            });\n          });\n        })[\"catch\"](function (err) {\n          return console.log(err);\n        });\n      }\n    };\n\n    _this.handleChange = function (event) {\n      // setAge(event.target.value as string);\n      if (event.target.value != _this.state.selectedLang) {\n        _this.setState({\n          selectedLang: event.target.value\n        });\n      }\n\n      console.log(event.target.value, \"event.target.value\");\n    };\n\n    return _this;\n  }\n\n  _createClass(OffersList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      LangAPI.get(\"/offers?lang=\".concat(this.state.selectedLang)).then(function (response) {\n        var _response$data2, _response$data2$data;\n\n        var rows = response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$data = _response$data2.data) === null || _response$data2$data === void 0 ? void 0 : _response$data2$data.filter(function (x) {\n          return (x === null || x === void 0 ? void 0 : x.is_premium) === 1;\n        });\n\n        _this2.setState({\n          rows: rows\n        });\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this3 = this;\n\n      if (prevState.selectedLang !== this.state.selectedLang) {\n        LangAPI.get(\"/offers?lang=\".concat(this.state.selectedLang)).then(function (response) {\n          var _response$data3, _response$data3$data;\n\n          var rows = response === null || response === void 0 ? void 0 : (_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : (_response$data3$data = _response$data3.data) === null || _response$data3$data === void 0 ? void 0 : _response$data3$data.filter(function (x) {\n            return (x === null || x === void 0 ? void 0 : x.is_premium) === 1;\n          });\n\n          if (_this3.state.rows != rows) {\n            // this.setState({ rows: rows.filter((x) => x.post_type !== \"page\") });\n            _this3.setState({\n              rows: rows\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var isCategoryFormOpen = this.state.isCategoryFormOpen;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Box, {\n        marginBottom: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/admin/premium-offers/add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        startIcon: /*#__PURE__*/React.createElement(AddOutlined, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 28\n          }\n        }),\n        disableElevation: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 15\n        }\n      }, \"Add Offer\")), /*#__PURE__*/React.createElement(FormControl, {\n        variant: \"outlined\",\n        size: \"small\",\n        style: {\n          width: \"20%\"\n        } // fullWidth\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        id: \"language\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 15\n        }\n      }, \"Select Language\"), /*#__PURE__*/React.createElement(Select, {\n        labelId: \"language\",\n        id: \"language\",\n        name: \"language\",\n        value: this.state.selectedLang // onChange={handleInputChange}\n        ,\n        label: \"Select Language\",\n        fullWidth: true,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        value: 'en',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }\n      }, \"En\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 'fr',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, \"FR\"), /*#__PURE__*/React.createElement(MenuItem, {\n        value: 'de',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }, \"DE\"))))), /*#__PURE__*/React.createElement(MUIDataTable, {\n        title: \"Premium Offers List\",\n        columns: this.state.columns,\n        data: this.state.rows,\n        options: this.options,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 9\n        }\n      }), isCategoryFormOpen && /*#__PURE__*/React.createElement(CategoryDialog, {\n        open: isCategoryFormOpen,\n        handleClose: function handleClose() {\n          return _this4.setState({\n            isCategoryFormOpen: false\n          });\n        },\n        handleCategorySubmit: this.handleCategorySubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 33\n        }\n      }));\n    }\n  }]);\n\n  return OffersList;\n}(Component);\n\nexport default OffersList;","map":{"version":3,"sources":["E:/laragon/www/Prism/gymShark/gymShark_cms/src/views/Premiuim-offers/List.jsx"],"names":["React","Component","MUIDataTable","API","LangAPI","Avatar","Box","Button","Select","MenuItem","FormControl","InputLabel","AddOutlined","DeleteOutlined","EditOutlined","ListOutlined","VisibilityOutlined","Link","CategoryDialog","OffersList","state","isCategoryFormOpen","selectedLang","offers","columns","name","label","options","filter","sort","customBodyRender","val","length","substr","handleDelete","rows","filterType","responsive","handleCategorySubmit","category_name","alert","id","window","confirm","then","response","status","get","data","x","is_premium","setState","err","console","log","handleChange","event","target","value","prevProps","prevState","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport MUIDataTable from \"mui-datatables\";\nimport API from 'utils/http';\nimport LangAPI from \"langapi/http\";\nimport { Avatar, Box, Button, Select, MenuItem, FormControl } from \"@material-ui/core\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { AddOutlined, DeleteOutlined, EditOutlined, ListOutlined, VisibilityOutlined } from '@material-ui/icons';\nimport { Link } from 'react-router-dom';\nimport CategoryDialog from './CategoryDialog';\n\nclass OffersList extends Component {\n  state = {\n    isCategoryFormOpen: false,\n    selectedLang: \"en\",\n    offers: [],\n    columns: [\n      {\n        name: \"thumbnailPreview\",\n        label: \"Image\",\n        options: {\n          filter: false,\n          sort: false,\n          customBodyRender: (val) => (\n            <Avatar alt={\"Image\"} src={val}></Avatar>\n          )\n        }\n      },\n      {\n        name: \"post_name\",\n        label: \"Name\",\n        options: {\n          filter: true,\n          sort: true,\n        }\n      },\n      {\n        name: \"is_premium\",\n        label: \"Room Type\",\n        options: {\n          filter: true,\n          sort: false,\n          customBodyRender: (val) => {\n            return val === 0 ? 'Other Offer' : 'Premium Offer'\n          }\n        }\n      },\n      {\n        name: \"short_description\",\n        label: \"Description\",\n        options: {\n          filter: true,\n          sort: false,\n          customBodyRender: val => (\n            val?.length > 100 ? val?.substr(0, 100) + '...' : val\n          )\n        }\n      },\n      // {\n      //   name: \"post_content\",\n      //   label: \"Content\",\n      //   options: {\n      //     filter: true,\n      //     sort: false,\n      //   }\n      // },\n      {\n        name: \"slug\",\n        label: \"Actions\",\n        options: {\n          filter: false,\n          sort: false,\n          customBodyRender: val => (\n            <div className=\"d-flex nowrap\">\n              <Link title=\"View Details\" to={`/admin/premium-offers/${val}?lang=${this.state.selectedLang}`} >\n                <VisibilityOutlined fontSize=\"small\" color=\"action\" />\n              </Link>\n              <Link className=\"ml-2\" title=\"Edit\" to={`/admin/premium-offers/edit/${val}?lang=${this.state.selectedLang}`} >\n                <EditOutlined fontSize=\"small\" color=\"primary\" />\n              </Link>\n              <Link className=\"ml-2\" title=\"Delete\" to={`#`} onClick={() => this.handleDelete(val)} >\n                <DeleteOutlined fontSize=\"small\" color=\"secondary\" />\n              </Link>\n            </div>\n          )\n        }\n      },\n    ],\n    rows: []\n  }\n\n  options = {\n    filterType: \"checkbox\",\n    responsive: \"vertical\",\n  };\n\n  componentDidMount() {\n    LangAPI.get(`/offers?lang=${this.state.selectedLang}`).then(response => {\n      let rows = response?.data?.data?.filter((x) => x?.is_premium === 1);\n      this.setState({ rows })\n    })\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.selectedLang !== this.state.selectedLang) {\n      LangAPI.get(`/offers?lang=${this.state.selectedLang}`).then((response) => {\n        let rows = response?.data?.data?.filter((x) => x?.is_premium === 1);\n        if (this.state.rows != rows) {\n          // this.setState({ rows: rows.filter((x) => x.post_type !== \"page\") });\n          this.setState({ rows });\n        }\n      });\n    }\n  }\n\n  handleCategorySubmit = (category_name) => {\n    if (!category_name || category_name === \"\") {\n      alert(\"Please enter category name\");\n      return;\n    }\n    // API.post('/offer_categories/offers', { category_name }).then(response => {\n    //   if (response?.status === 200) {\n    //     alert(response.data?.message);\n    //     this.setState({ isCategoryFormOpen: false })\n    //   }\n    // }).catch(err => {\n    //   alert(\"Something went wrong.\");\n    // })\n  }\n\n  handleDelete = (id) => {\n    if (window.confirm('Are you sure you want to delete this ?')) {\n      LangAPI.delete(`/offers/${id}?lang=${this.state.selectedLang}`).then(response => {\n        if (response.status === 200) {\n          alert(\"Offer deleted successfully !\");\n        }\n      })\n        .then(() => {\n          LangAPI.get(`/offers?lang=${this.state.selectedLang}`).then(response => {\n            let rows = response?.data?.data?.filter((x) => x?.is_premium === 1);\n            this.setState({ rows })\n          })\n        })\n        .catch(err => console.log(err))\n    }\n  }\n\n  handleChange = (event) => {\n    // setAge(event.target.value as string);\n    if (event.target.value != this.state.selectedLang) {\n      this.setState({ selectedLang: event.target.value })\n    }\n    console.log(event.target.value, \"event.target.value\")\n  };\n\n  render() {\n    const { isCategoryFormOpen } = this.state\n    return (\n      <div>\n        <Box marginBottom={4}>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <Link to=\"/admin/premium-offers/add\">\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                startIcon={<AddOutlined />}\n                disableElevation\n              >\n                Add Offer\n              </Button>\n            </Link>\n            <FormControl\n              variant=\"outlined\"\n              size=\"small\"\n              style={{ width: \"20%\" }}\n            // fullWidth\n            >\n              <InputLabel id=\"language\">Select Language</InputLabel>\n              <Select\n                labelId=\"language\"\n                id=\"language\"\n                name=\"language\"\n                value={this.state.selectedLang}\n                // onChange={handleInputChange}\n                label=\"Select Language\"\n                fullWidth\n                onChange={this.handleChange}\n              >\n                {/* <MenuItem value={-1}>\n                        <em>Select Language</em>\n                    </MenuItem> */}\n                <MenuItem value={'en'}>En</MenuItem>\n                <MenuItem value={'fr'}>FR</MenuItem>\n                <MenuItem value={'de'}>DE</MenuItem>\n\n              </Select>\n            </FormControl>\n          </div>\n          {/* <Button\n            variant=\"outlined\"\n            className=\"ml-3\"\n            color=\"primary\"\n            startIcon={<ListOutlined />}\n            onClick={() => this.setState({ isCategoryFormOpen: true })}\n          >\n            Add Offer Category\n          </Button> */}\n        </Box>\n        <MUIDataTable\n          title=\"Premium Offers List\"\n          columns={this.state.columns}\n          data={this.state.rows}\n          options={this.options}\n        />\n        {\n          isCategoryFormOpen && <CategoryDialog open={isCategoryFormOpen} handleClose={() => this.setState({ isCategoryFormOpen: false })} handleCategorySubmit={this.handleCategorySubmit} />\n        }\n      </div>\n    );\n  }\n}\n\nexport default OffersList;"]},"metadata":{},"sourceType":"module"}