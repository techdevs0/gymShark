"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _sidebarChecker = require("../utils/sidebarChecker");

var _FixedInsetSidebar = require("../effects/FixedInsetSidebar");

var _AbsoluteInsetSidebar = require("../effects/AbsoluteInsetSidebar");

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var _default = function _default(insetSidebar) {
  var iterateBreakpoints = function iterateBreakpoints(breakpoints, result, configMap) {
    var lastConfig = undefined;
    breakpoints.keys.forEach(function (bp) {
      var config = configMap[bp];

      if (config) {
        lastConfig = config;
      }

      if (lastConfig && (0, _sidebarChecker.isFixedInsetSidebarConfig)(lastConfig)) {
        result[breakpoints.only(bp)] = _extends(_extends({}, result[breakpoints.only(bp)]), (0, _FixedInsetSidebar.createFixedInsetSidebarEffect)(lastConfig).getAvoidingStyle());
      }

      if (lastConfig && (0, _sidebarChecker.isAbsoluteInsetSidebarConfig)(lastConfig)) {
        result[breakpoints.only(bp)] = _extends(_extends({}, result[breakpoints.only(bp)]), (0, _AbsoluteInsetSidebar.createAbsoluteInsetSidebarEffect)(lastConfig).getAvoidingStyle());
      }
    });
  };

  return {
    getMediaQueryStyle: function getMediaQueryStyle(breakpoints) {
      var sidebarIds = Object.keys(insetSidebar.configMapById);
      var styles = {};
      sidebarIds.forEach(function (id) {
        var configMap = insetSidebar.configMapById[id];
        iterateBreakpoints(breakpoints, styles, configMap);
      });
      return styles;
    }
  };
};

exports["default"] = _default;