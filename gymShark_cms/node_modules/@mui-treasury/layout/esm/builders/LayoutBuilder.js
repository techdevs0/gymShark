import HeaderBuilder from './Header';
import SubheaderBuilder from './Subheader';
import EdgeSidebarBuilder from './EdgeSidebar';
import ContentBuilder from './Content';
import FooterBuilder from './Footer';
import InsetSidebarBuilder from './InsetSidebar';
import { DEFAULT_CONTENT_ID, toObject } from '../utils';
export default (function () {
  var initialLayout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var global = initialLayout.global || {
    autoCollapse: {}
  };
  var header = HeaderBuilder(initialLayout.header);
  var subheader = SubheaderBuilder(initialLayout.subheader);
  var edgeSidebar = EdgeSidebarBuilder(initialLayout.edgeSidebar);
  var insetSidebar = InsetSidebarBuilder(initialLayout.insetSidebar);
  var content = ContentBuilder();
  var footer = FooterBuilder(); // setup default id

  content.create(DEFAULT_CONTENT_ID);
  return {
    configureHeader: function configureHeader(callback) {
      callback(header);
    },
    configureSubheader: function configureSubheader(callback) {
      callback(subheader);
    },
    configureEdgeSidebar: function configureEdgeSidebar(callback) {
      callback(edgeSidebar);
    },
    configureInsetSidebar: function configureInsetSidebar(callback) {
      callback(insetSidebar);
    },
    enableAutoCollapse: function enableAutoCollapse(sidebarId) {
      var breakpoint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'md';
      global.autoCollapse[sidebarId] = breakpoint;
    },
    getComponentData: function getComponentData() {
      return {
        global: global,
        edgeSidebar: edgeSidebar.getData(),
        insetSidebar: insetSidebar.getData(),
        header: header.getData(),
        headerId: header.getId(),
        subheader: subheader.getData(),
        content: {
          id: content.getId()
        },
        footer: {
          id: footer.getId()
        }
      };
    },
    clone: function clone() {
      return (// use this approach as deep clone for now
        JSON.parse(JSON.stringify({
          header: header.getData(),
          subheader: subheader.getData(),
          edgeSidebar: edgeSidebar.getData().configMapById,
          insetSidebar: insetSidebar.getData().configMapById,
          content: content.getData(),
          footer: footer.getData()
        }))
      );
    },
    getInitialState: function getInitialState() {
      var _edgeSidebar$getData = edgeSidebar.getData(),
          ids = _edgeSidebar$getData.ids;

      return {
        sidebar: toObject(ids, function () {
          return {
            open: false,
            collapsed: false
          };
        })
      };
    },
    debug: function debug() {
      if (process.env.NODE_ENV !== 'production') {
        header.debug();
        subheader.debug();
        edgeSidebar.debug();
        insetSidebar.debug();
        content.debug();
        footer.debug();
      }
    },
    getJSON: function getJSON() {
      console.log(JSON.stringify({
        header: header.getData(),
        subheader: subheader.getData(),
        edgeSidebar: edgeSidebar.getData().configMapById,
        insetSidebar: insetSidebar.getData().configMapById
      }, null, 2));
    }
  };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9idWlsZGVycy9MYXlvdXRCdWlsZGVyLnRzIl0sIm5hbWVzIjpbIkhlYWRlckJ1aWxkZXIiLCJTdWJoZWFkZXJCdWlsZGVyIiwiRWRnZVNpZGViYXJCdWlsZGVyIiwiQ29udGVudEJ1aWxkZXIiLCJGb290ZXJCdWlsZGVyIiwiSW5zZXRTaWRlYmFyQnVpbGRlciIsIkRFRkFVTFRfQ09OVEVOVF9JRCIsInRvT2JqZWN0IiwiaW5pdGlhbExheW91dCIsImdsb2JhbCIsImF1dG9Db2xsYXBzZSIsImhlYWRlciIsInN1YmhlYWRlciIsImVkZ2VTaWRlYmFyIiwiaW5zZXRTaWRlYmFyIiwiY29udGVudCIsImZvb3RlciIsImNyZWF0ZSIsImNvbmZpZ3VyZUhlYWRlciIsImNhbGxiYWNrIiwiY29uZmlndXJlU3ViaGVhZGVyIiwiY29uZmlndXJlRWRnZVNpZGViYXIiLCJjb25maWd1cmVJbnNldFNpZGViYXIiLCJlbmFibGVBdXRvQ29sbGFwc2UiLCJzaWRlYmFySWQiLCJicmVha3BvaW50IiwiZ2V0Q29tcG9uZW50RGF0YSIsImdldERhdGEiLCJoZWFkZXJJZCIsImdldElkIiwiaWQiLCJjbG9uZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImNvbmZpZ01hcEJ5SWQiLCJnZXRJbml0aWFsU3RhdGUiLCJpZHMiLCJzaWRlYmFyIiwib3BlbiIsImNvbGxhcHNlZCIsImRlYnVnIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiZ2V0SlNPTiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUNBLE9BQU9BLGFBQVAsTUFBMEIsVUFBMUI7QUFDQSxPQUFPQyxnQkFBUCxNQUE2QixhQUE3QjtBQUNBLE9BQU9DLGtCQUFQLE1BQStCLGVBQS9CO0FBQ0EsT0FBT0MsY0FBUCxNQUEyQixXQUEzQjtBQUNBLE9BQU9DLGFBQVAsTUFBMEIsVUFBMUI7QUFDQSxPQUFPQyxtQkFBUCxNQUFnQyxnQkFBaEM7QUFnQkEsU0FBU0Msa0JBQVQs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IjpbImltcG9ydCB7IEJyZWFrcG9pbnQgfSBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9zdHlsZXMvY3JlYXRlQnJlYWtwb2ludHMnO1xuaW1wb3J0IEhlYWRlckJ1aWxkZXIgZnJvbSAnLi9IZWFkZXInO1xuaW1wb3J0IFN1YmhlYWRlckJ1aWxkZXIgZnJvbSAnLi9TdWJoZWFkZXInO1xuaW1wb3J0IEVkZ2VTaWRlYmFyQnVpbGRlciBmcm9tICcuL0VkZ2VTaWRlYmFyJztcbmltcG9ydCBDb250ZW50QnVpbGRlciBmcm9tICcuL0NvbnRlbnQnO1xuaW1wb3J0IEZvb3RlckJ1aWxkZXIgZnJvbSAnLi9Gb290ZXInO1xuaW1wb3J0IEluc2V0U2lkZWJhckJ1aWxkZXIgZnJvbSAnLi9JbnNldFNpZGViYXInO1xuaW1wb3J0IHtcbiAgSUhlYWRlckJ1aWxkZXIsXG4gIElFZGdlU2lkZWJhckJ1aWxkZXIsXG4gIFN0YXRlLFxuICBHbG9iYWxDb25maWcsXG4gIExheW91dERhdGEsXG4gIEVkZ2VTaWRlYmFyQ29uZmlnTWFwQnlJZCxcbiAgU3ViaGVhZGVyQ29uZmlnTWFwQnlJZCxcbiAgSGVhZGVyQ29uZmlnTWFwLFxufSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge1xuICBJSW5zZXRTaWRlYmFyQnVpbGRlcixcbiAgSW5zZXRTaWRlYmFyQ29uZmlnTWFwQnlJZCxcbn0gZnJvbSAnLi9JbnNldFNpZGViYXIvSW5zZXRTaWRlYmFyQnVpbGRlcic7XG5pbXBvcnQgeyBJU3ViaGVhZGVyQnVpbGRlciB9IGZyb20gJy4vU3ViaGVhZGVyL1N1YmhlYWRlckJ1aWxkZXInO1xuaW1wb3J0IHsgREVGQVVMVF9DT05URU5UX0lELCB0b09iamVjdCB9IGZyb20gJy4uL3V0aWxzJztcblxuaW50ZXJmYWNlIEJ1aWxkZXJDYWxsYmFjazxUPiB7XG4gIChidWlsZGVyOiBUKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTGF5b3V0QnVpbGRlciB7XG4gIGNvbmZpZ3VyZUhlYWRlcjogKFxuICAgIGNhbGxiYWNrOiBCdWlsZGVyQ2FsbGJhY2s8XG4gICAgICBQaWNrPElIZWFkZXJCdWlsZGVyLCAnY3JlYXRlJyB8ICdyZWdpc3RlckNvbmZpZycgfCAndXBkYXRlJz5cbiAgICA+XG4gICkgPT4gdm9pZDtcbiAgY29uZmlndXJlU3ViaGVhZGVyOiAoXG4gICAgY2FsbGJhY2s6IEJ1aWxkZXJDYWxsYmFjazxcbiAgICAgIFBpY2s8SVN1YmhlYWRlckJ1aWxkZXIsICdjcmVhdGUnIHwgJ3VwZGF0ZScgfCAnaGlkZSc+XG4gICAgPlxuICApID0+IHZvaWQ7XG4gIGNvbmZpZ3VyZUVkZ2VTaWRlYmFyOiAoXG4gICAgY2FsbGJhY2s6IEJ1aWxkZXJDYWxsYmFjazxcbiAgICAgIFBpY2s8SUVkZ2VTaWRlYmFyQnVpbGRlciwgJ2NyZWF0ZScgfCAndXBkYXRlJyB8ICdoaWRlJz5cbiAgICA+XG4gICkgPT4gdm9pZDtcbiAgY29uZmlndXJlSW5zZXRTaWRlYmFyOiAoXG4gICAgY2FsbGJhY2s6IEJ1aWxkZXJDYWxsYmFjazxQaWNrPElJbnNldFNpZGViYXJCdWlsZGVyLCAnY3JlYXRlJz4+XG4gICkgPT4gdm9pZDtcbiAgZW5hYmxlQXV0b0NvbGxhcHNlOiAoc2lkZWJhcklkOiBzdHJpbmcsIGJyZWFrcG9pbnQ/OiBCcmVha3BvaW50KSA9PiB2b2lkO1xuICBnZXRDb21wb25lbnREYXRhOiAoKSA9PiBMYXlvdXREYXRhO1xuICBjbG9uZTogKCkgPT4ge1xuICAgIGVkZ2VTaWRlYmFyOiBFZGdlU2lkZWJhckNvbmZpZ01hcEJ5SWQ7XG4gIH07XG4gIGdldEluaXRpYWxTdGF0ZTogKCkgPT4gU3RhdGU7XG4gIGRlYnVnOiAoKSA9PiB2b2lkO1xuICBnZXRKU09OOiAoKSA9PiB2b2lkO1xufVxuXG50eXBlIEluaXRpYWxMYXlvdXQgPSB7XG4gIGdsb2JhbD86IEdsb2JhbENvbmZpZztcbiAgaGVhZGVyPzogSGVhZGVyQ29uZmlnTWFwO1xuICBzdWJoZWFkZXI/OiBTdWJoZWFkZXJDb25maWdNYXBCeUlkO1xuICBlZGdlU2lkZWJhcj86IEVkZ2VTaWRlYmFyQ29uZmlnTWFwQnlJZDtcbiAgaW5zZXRTaWRlYmFyPzogSW5zZXRTaWRlYmFyQ29uZmlnTWFwQnlJZDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IChpbml0aWFsTGF5b3V0OiBJbml0aWFsTGF5b3V0ID0ge30pOiBJTGF5b3V0QnVpbGRlciA9PiB7XG4gIGNvbnN0IGdsb2JhbDogR2xvYmFsQ29uZmlnID0gaW5pdGlhbExheW91dC5nbG9iYWwgfHwgeyBhdXRvQ29sbGFwc2U6IHt9IH07XG4gIGNvbnN0IGhlYWRlciA9IEhlYWRlckJ1aWxkZXIoaW5pdGlhbExheW91dC5oZWFkZXIpO1xuICBjb25zdCBzdWJoZWFkZXIgPSBTdWJoZWFkZXJCdWlsZGVyKGluaXRpYWxMYXlvdXQuc3ViaGVhZGVyKTtcbiAgY29uc3QgZWRnZVNpZGViYXIgPSBFZGdlU2lkZWJhckJ1aWxkZXIoaW5pdGlhbExheW91dC5lZGdlU2lkZWJhcik7XG4gIGNvbnN0IGluc2V0U2lkZWJhciA9IEluc2V0U2lkZWJhckJ1aWxkZXIoaW5pdGlhbExheW91dC5pbnNldFNpZGViYXIpO1xuICBjb25zdCBjb250ZW50ID0gQ29udGVudEJ1aWxkZXIoKTtcbiAgY29uc3QgZm9vdGVyID0gRm9vdGVyQnVpbGRlcigpO1xuXG4gIC8vIHNldHVwIGRlZmF1bHQgaWRcbiAgY29udGVudC5jcmVhdGUoREVGQVVMVF9DT05URU5UX0lEKTtcblxuICByZXR1cm4ge1xuICAgIGNvbmZpZ3VyZUhlYWRlcihjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soaGVhZGVyKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyZVN1YmhlYWRlcihjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soc3ViaGVhZGVyKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyZUVkZ2VTaWRlYmFyKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayhlZGdlU2lkZWJhcik7XG4gICAgfSxcbiAgICBjb25maWd1cmVJbnNldFNpZGViYXIoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKGluc2V0U2lkZWJhcik7XG4gICAgfSxcbiAgICBlbmFibGVBdXRvQ29sbGFwc2Uoc2lkZWJhcklkLCBicmVha3BvaW50ID0gJ21kJykge1xuICAgICAgZ2xvYmFsLmF1dG9Db2xsYXBzZVtzaWRlYmFySWRdID0gYnJlYWtwb2ludDtcbiAgICB9LFxuICAgIGdldENvbXBvbmVudERhdGE6ICgpID0+ICh7XG4gICAgICBnbG9iYWwsXG4gICAgICBlZGdlU2lkZWJhcjogZWRnZVNpZGViYXIuZ2V0RGF0YSgpLFxuICAgICAgaW5zZXRTaWRlYmFyOiBpbnNldFNpZGViYXIuZ2V0RGF0YSgpLFxuICAgICAgaGVhZGVyOiBoZWFkZXIuZ2V0RGF0YSgpLFxuICAgICAgaGVhZGVySWQ6IGhlYWRlci5nZXRJZCgpLFxuICAgICAgc3ViaGVhZGVyOiBzdWJoZWFkZXIuZ2V0RGF0YSgpLFxuICAgICAgY29udGVudDogeyBpZDogY29udGVudC5nZXRJZCgpIH0sXG4gICAgICBmb290ZXI6IHsgaWQ6IGZvb3Rlci5nZXRJZCgpIH0sXG4gICAgfSksXG4gICAgY2xvbmU6ICgpID0+XG4gICAgICAvLyB1c2UgdGhpcyBhcHByb2FjaCBhcyBkZWVwIGNsb25lIGZvciBub3dcbiAgICAgIEpTT04ucGFyc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBoZWFkZXI6IGhlYWRlci5nZXREYXRhKCksXG4gICAgICAgICAgc3ViaGVhZGVyOiBzdWJoZWFkZXIuZ2V0RGF0YSgpLFxuICAgICAgICAgIGVkZ2VTaWRlYmFyOiBlZGdlU2lkZWJhci5nZXREYXRhKCkuY29uZmlnTWFwQnlJZCxcbiAgICAgICAgICBpbnNldFNpZGViYXI6IGluc2V0U2lkZWJhci5nZXREYXRhKCkuY29uZmlnTWFwQnlJZCxcbiAgICAgICAgICBjb250ZW50OiBjb250ZW50LmdldERhdGEoKSxcbiAgICAgICAgICBmb290ZXI6IGZvb3Rlci5nZXREYXRhKCksXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgIGdldEluaXRpYWxTdGF0ZTogKCkgPT4ge1xuICAgICAgY29uc3QgeyBpZHMgfSA9IGVkZ2VTaWRlYmFyLmdldERhdGEoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNpZGViYXI6IHRvT2JqZWN0KGlkcywgKCkgPT4gKHtcbiAgICAgICAgICBvcGVuOiBmYWxzZSxcbiAgICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlLFxuICAgICAgICB9KSksXG4gICAgICB9O1xuICAgIH0sXG4gICAgZGVidWcoKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBoZWFkZXIuZGVidWcoKTtcbiAgICAgICAgc3ViaGVhZGVyLmRlYnVnKCk7XG4gICAgICAgIGVkZ2VTaWRlYmFyLmRlYnVnKCk7XG4gICAgICAgIGluc2V0U2lkZWJhci5kZWJ1ZygpO1xuICAgICAgICBjb250ZW50LmRlYnVnKCk7XG4gICAgICAgIGZvb3Rlci5kZWJ1ZygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0SlNPTigpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICB7XG4gICAgICAgICAgICBoZWFkZXI6IGhlYWRlci5nZXREYXRhKCksXG4gICAgICAgICAgICBzdWJoZWFkZXI6IHN1YmhlYWRlci5nZXREYXRhKCksXG4gICAgICAgICAgICBlZGdlU2lkZWJhcjogZWRnZVNpZGViYXIuZ2V0RGF0YSgpLmNvbmZpZ01hcEJ5SWQsXG4gICAgICAgICAgICBpbnNldFNpZGViYXI6IGluc2V0U2lkZWJhci5nZXREYXRhKCkuY29uZmlnTWFwQnlJZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgMlxuICAgICAgICApXG4gICAgICApO1xuICAgIH0sXG4gIH07XG59O1xuIl19